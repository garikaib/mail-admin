<div id="messages" {% if request.headers.HX_Request %}hx-swap-oob="true" {% endif %}
    class="fixed bottom-6 right-6 z-50 flex flex-col gap-3">
    {% for message in messages %}
    <div
        class="animate-slide-in min-w-[300px] bg-white border border-slate-200 shadow-2xl rounded-2xl p-4 flex items-start gap-4">
        <div
            class="{% if message.tags == 'error' %}text-red-500 bg-red-50{% else %}text-emerald-500 bg-emerald-50{% endif %} p-2.5 rounded-xl shadow-sm">
            <i data-lucide="{% if message.tags == 'error' %}alert-circle{% else %}check-circle{% endif %}"
                class="w-5 h-5"></i>
        </div>
        <div class="flex-1">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Notification</p>
            <p class="text-xs font-bold text-slate-800 mt-1 leading-relaxed">{{ message }}</p>

            {% if "copy:" in message.tags %}
            <button
                onclick="const pwd = '{{ message.tags }}'.split('copy:')[1].split(' ')[0]; copyToClipboard(pwd, this)"
                class="mt-3 flex items-center gap-2 text-[10px] font-black uppercase tracking-tighter text-indigo-600 hover:text-indigo-800 transition-colors bg-indigo-50 px-3 py-1.5 rounded-lg border border-indigo-100/50">
                <i data-lucide="copy" class="w-3.5 h-3.5"></i>
                <span>Copy Password</span>
            </button>
            {% endif %}
        </div>
        <button onclick="this.parentElement.remove()" class="text-slate-300 hover:text-slate-600 transition-colors">
            <i data-lucide="x" class="w-4 h-4"></i>
        </button>
    </div>
    {% endfor %}
</div>

<script>
    if (window.lucide) {
        lucide.createIcons();
    }
</script>