<div id="messages" {% if request.headers.HX_Request %}hx-swap-oob="true" {% endif %}
    class="fixed bottom-6 right-6 z-50 flex flex-col gap-3">
    {% for message in messages %}
    <div
        class="animate-slide-in min-w-[300px] bg-white border border-slate-200 shadow-2xl rounded-2xl p-4 flex items-start gap-4">
        <div
            class="{% if message.tags == 'error' %}text-red-500 bg-red-50{% else %}text-emerald-500 bg-emerald-50{% endif %} p-2.5 rounded-xl shadow-sm">
            <i data-lucide="{% if message.tags == 'error' %}alert-circle{% else %}check-circle{% endif %}"
                class="w-5 h-5"></i>
        </div>
        <div class="flex-1 min-w-[320px]">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1">Infrastructure Notification
            </p>
            <p class="text-sm font-bold text-slate-800 leading-relaxed">{{ message }}</p>

            {% if "pwd_copy:" in message.tags %}
            {% with tag_parts=message.tags.split %}
            {% for tag in tag_parts %}
            {% if "pwd_copy:" in tag %}
            <button
                class="copy-pwd-btn mt-4 w-full flex items-center justify-center gap-2 text-[11px] font-black uppercase tracking-widest text-white hover:bg-slate-800 transition-all bg-slate-900 px-6 py-3 rounded-xl shadow-lg border border-slate-800"
                data-pwd="{{ tag|slice:'9:' }}">
                <i data-lucide="copy" class="w-4 h-4"></i>
                <span>Copy Secure Password</span>
            </button>
            {% endif %}
            {% endfor %}
            {% endwith %}
            {% endif %}
        </div>
        <button class="close-msg-btn text-slate-300 hover:text-slate-600 transition-colors">
            <i data-lucide="x" class="w-4 h-4"></i>
        </button>
    </div>
    {% endfor %}
</div>